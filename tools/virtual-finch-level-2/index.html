<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Virtual Finch Simulator – Level 2</title>
  <link rel="stylesheet" href="./style.css" />
</head>

<body>

  <!-- TOP BAR -->
  <header class="topbar">
    <div class="topbar-left">
      <a href="../../index.html" class="home-link">← Home</a>
      <h1 id="toolTitle">Virtual Finch Simulator</h1>
      <p id="toolDesc">
        Level 2 · Continuous movement with adjustable distance and wall behavior
      </p>
    </div>

    <div class="topbar-right">
      <button id="runBtn" class="btn primary">Run</button>
      <button id="stopBtn" class="btn">Stop</button>
      <button id="resetBtn" class="btn">Reset</button>
      <button id="printBtn" class="btn">Print</button>
    </div>
  </header>

  <!-- MAIN LAYOUT -->
  <main class="layout">

    <!-- LEFT PANEL -->
    <section class="panel">
      <h2>Build your movement rules</h2>
      <p class="muted">
        Define how the Finch moves while a key is held down, how far it moves
        each step, and what happens when it hits a wall.
      </p>

      <!-- MOVEMENT CONTROLS -->
      <div class="builder">
        <div class="row">
          <label for="stepInput">Spaces per move</label>
          <input
            type="number"
            id="stepInput"
            min="1"
            max="10"
            value="3"
          />
        </div>

        <div class="row">
          <label for="wallMode">Wall behavior</label>
          <select id="wallMode">
            <option value="stop">Stop at wall</option>
            <option value="bounce">Bounce off wall</option>
          </select>
        </div>
      </div>

      <!-- RULE BUILDER -->
      <div class="builder">
        <div class="row">
          <label for="eventSelect">When</label>
          <select id="eventSelect"></select>
        </div>

        <div class="row">
          <label for="actionSelect">Do</label>
          <select id="actionSelect"></select>
        </div>

        <button id="addRuleBtn" class="btn primary">Add rule</button>
      </div>

      <h3>Current rules</h3>
      <div id="rulesList" class="rulesList"></div>

      <!-- ADVANCED -->
      <details class="advanced">
        <summary>Export or import rules</summary>

        <div class="advanced-inner">
          <button id="exportBtn" class="btn">Export JSON</button>
          <button id="importBtn" class="btn">Import JSON</button>

          <textarea
            id="rulesJson"
            spellcheck="false"
            placeholder="Rules JSON will appear here"
          ></textarea>

          <p id="status" class="status"></p>
        </div>
      </details>
    </section>

    <!-- RIGHT PANEL -->
    <section class="panel">
      <h2>Virtual Finch space</h2>
      <p class="muted">
        Click Run, then <strong>hold</strong> arrow keys to move.
        Smaller space values give finer control.
      </p>

      <div id="world" class="world" aria-label="Virtual Finch world">
        <div id="finch" class="finch" aria-label="Virtual Finch"></div>
      </div>

      <div class="hud">
        <div>
          <strong>Position:</strong>
          <span id="posText">x 0, y 0</span>
        </div>
        <div>
          <strong>Status:</strong>
          <span id="runText">Stopped</span>
        </div>
      </div>

      <div class="howto">
        <h3>How to play</h3>
        <ul>
          <li>Add at least one rule for an arrow key</li>
          <li>Choose how many spaces the Finch moves per step</li>
          <li>Select what happens when the Finch hits a wall</li>
          <li>Click Run</li>
          <li><strong>Hold</strong> arrow keys to move continuously</li>
          <li>Reset returns the Finch to the start position</li>
        </ul>
      </div>
    </section>

  </main>

  <!-- SCRIPTS -->
  <script src="./config.js"></script>
  <script src="./core.js"></script>

</body>
</html>
